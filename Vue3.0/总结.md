# æ€»ç»“

è¿™ä¸ªéƒ¨åˆ†é‡ç‚¹å¯¹æˆ‘åœ¨å­¦ä¹ ä¸­é‡åˆ°çš„é—®é¢˜è¿›è¡Œæ€»ç»“ï¼Œä¼šåˆ†äº«ä¸€äº›é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼Œå¤§å®¶é‡åˆ°çš„é—®é¢˜ä¹Ÿå¯ä»¥ç•™è¨€è¯„è®ºä¸€èµ·æ¢è®¨ğŸ˜

## Vue3.xå’ŒVue2.xçš„å‡ ä¸ªæ˜æ˜¾åŒºåˆ«ï¼š

### \#\# data

**vue2.x**

```
data() { return{} }
```

å®ç°å“åº”å¼

* å®šä¹‰åœ¨dataä¸­
* ä½¿ç”¨Vue.setå®ç°å“åº”å¼

**vue3.x**

```
import { reactive } from 'vue'

setup (props) {
    const state = reactive({
      title: 'Hello Vue3.0'
    })
    return state
 }
```

å®ç°å“åº”å¼

* ä»vueåŒ…ä¸­å¯¼å…¥ toRefs å‡½æ•°ï¼Œå¯¼å‡ºstateçš„æ—¶å€™ï¼Œè¿›è¡ŒåŒ…è£¹ã€‚ä»£ç å¦‚ä¸‹

```
setup (props) {
    const state = reactive({
      title: 'Hello Vue3.0'
    })
   return { ...toRefs(state), xxx }
 }
```

### \#\# methods

**vue2.x**

methods: { æ–¹æ³• }

**vue3.x**

* å†™åœ¨setupå‡½æ•°ä¸­ï¼Œå¹¶ä¸”è¦returnè¿”å›æ–¹æ³•åç§°
* è®°å¾—è¦æŠŠè¿”å›çš„stateæ•°æ®ï¼Œé€šè¿‡toRefså˜æˆå“åº”å¼çš„æ•°æ®ï¼Œå¦åˆ™ä¸ä¼šèµ·ä½œç”¨ã€‚ä»£ç å¦‚ä¸‹

```
return {
      ...toRefs(state),
      play
 }
```

### \#\# computed

**vue2.x**

computed: {è®¡ç®—å±æ€§}

**vue3.x**

* å†™åœ¨setupå‡½æ•°ä¸­ã€‚ä»£ç å¦‚ä¸‹

```
const getDoubleNum = computed(() => state.num * 2)
```

* å†™åœ¨stateä¸­

```
const state = reactive({
      myName: computed(() => 'my name is vue3.x')
 })
```

æ³¨æ„ï¼šéœ€è¦ä»vueåŒ…ä¸­å¯¼å…¥ computed å‡½æ•°ï¼Œå¦‚æœæ˜¯å†™åœ¨setupå‡½æ•°ä¸­ï¼Œæœ€åreturnçš„æ—¶å€™ï¼Œè¿”å›è®¡ç®—å±æ€§å‡½æ•°ã€‚

**vue2.x**

createdã€mountedã€beforeDestoryã€Destoryed ... å’Œ dataåŒçº§

**vue3.x**

å†™åœ¨setupå‡½æ•°ä¸­ï¼ŒonCreatedã€onMountedã€onBeforeUnmountã€onUnmounted ...

**å¯¹æ¯”**

beforeCreate-&gt; ä½¿ç”¨ setup\(\)

created-&gt; ä½¿ç”¨setup\(\)

beforeMount -&gt; onBeforeMount

Mounted -&gt; onMounted

beforeUpdate -&gt; onBeforeUpdate

updated -&gt; onUpdated

beforeDestory -&gt;onBeforeDestory

destoryed -&gt; onDestoryed

### \#\# ç»„ä»¶ä¼ å€¼

**vue2.x**

çˆ¶ä¼ å­ï¼šprops

å­ä¼ çˆ¶ï¼šthis.$emit

å…„å¼Ÿç»„ä»¶ä¼ å€¼ï¼š å…¬å…±busï¼Œå­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶å†ç»™å­ç»„ä»¶ï¼ˆçˆ¶ç»„ä»¶ä½œä¸ºä¸­é—´ä»¶ï¼‰ã€‚

**vue3.x**

çˆ¶ä¼ å­ï¼ˆçˆ·å­™ä¼ ï¼Œå¤šçº§ä¹‹é—´å¯ä¼ å€¼ï¼‰

çˆ¶ç»„ä»¶ï¼šprovide---provide\('åå­—',å€¼\)

å­ç»„ä»¶ï¼šinject----inject\('åå­—'\)

ä»£ç å¦‚ä¸‹ï¼š

çˆ¶ç»„ä»¶ï¼š

```
<template>
<div>
<Son />
</div>
</template>
<script>
// å¼•å…¥å­ç»„ä»¶
import Son from '@/components/Son'
// å¼•å…¥vueå‡½æ•°
import {reactive,provide} from 'vue'
export default{
components:{Son},
setup(){
    const state = reactive({
        title: 'ä½ å¥½'
    })
    provide('title',title)
    return {state}
   }
}
</sctipt>
```

å­ç»„ä»¶ï¼š

```
<template>
<div>
    {{title}}
</div>
</template>
<script>
// å¼•å…¥vueå‡½æ•°
import {reactive,inject} from 'vue'
export default{
setup(){
    const state = reactive({
        title: inject('title')
    })
       return {state}
   }
}
</sctipt>
```

æ³¨æ„ï¼šçˆ¶å­ç»„ä»¶ä¼ å€¼éƒ½è¦å†™åœ¨ setup å‡½æ•°ä¸­

### \#\# setup

æ³¨æ„ï¼š

* setupå‡½æ•°åœ¨Vue3.0æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å‡½æ•°ï¼Œå®ƒçš„æ‰§è¡Œæ—¶æœºæ˜¯åœ¨ beforeCreateä¹‹å å’Œ createdä¹‹å‰ ï¼Œå¾ˆå¤šä»£ç éƒ½å¿…é¡»å†™åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œå¦‚æœè¦åœ¨ç»„ä»¶çš„templateä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±å¿…é¡»åœ¨setupä¸­returnå‡ºå»

**setupä¸­çš„ä¸¤ä¸ªå‚æ•°è¯´æ˜ï¼š**

1. propsï¼šç”¨äºæ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼ï¼Œæ³¨æ„ï¼šå¿…é¡»å…ˆåœ¨setupå¤–é¢propsä¸­å®šä¹‰å¥½ï¼Œæ‰èƒ½é€šè¿‡props.xxxæ‹¿åˆ°çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼

```
<script>
import { reactive, toRef, ref } from "vue";
export default {
  props: {
    title: String,
  },

setup(props, context) {
    // Attribute (éå“åº”å¼å¯¹è±¡)
    console.log(context.attrs)

    // æ’æ§½ (éå“åº”å¼å¯¹è±¡)
    console.log(context.slots)

    // è§¦å‘äº‹ä»¶ (æ–¹æ³•)
    console.log(context.emit)
  }

};
</script>
```

1. contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­åŒ…å«äº†ä¸€äº›æœ‰ç”¨çš„å±æ€§ï¼ˆå±æ€§ã€æ’æ§½ã€è§¦å‘äº‹ä»¶ï¼‰ï¼Œè¿™äº›å±æ€§åœ¨ vue 2.x ä¸­éœ€è¦é€šè¿‡ this æ‰èƒ½è®¿é—®åˆ°ï¼Œåœ¨ vue 3.x ä¸­ï¼Œå®ƒä»¬çš„è®¿é—®æ–¹å¼å¦‚ä¸‹ï¼š

2. é¡¹ç›®ä¸­vue2.xçš„è¯­æ³•å’Œ3.xçš„è¯­æ³•å¯ä»¥å…±å­˜

3. vue3.xä¹‹åï¼Œä¹‹å‰ç›´æ¥å†™åœ¨export default é‡Œé¢çš„å†…å®¹ï¼Œç°åœ¨å¤§éƒ¨åˆ†éƒ½è¦å†™åœ¨setupå‡½æ•°ä¸­ï¼Œå¹¶ä¸”æ¨¡å‹å€¼ã€äº‹ä»¶å¤„ç†ã€è®¡ç®—å±æ€§å‡½æ•°è¦è¿”å›
4. å¾ˆå¤šç”¨åˆ°çš„å†…å®¹æ¯”å¦‚ï¼šreactiveã€toRefsã€computedã€onMounted éƒ½éœ€è¦ä»vueåŒ…ä¸­å¯¼å…¥



