# æ€»ç»“

è¿™ä¸ªéƒ¨åˆ†é‡ç‚¹å¯¹æˆ‘åœ¨å­¦ä¹ ä¸­é‡åˆ°çš„é—®é¢˜è¿›è¡Œæ€»ç»“ï¼Œä¼šåˆ†äº«ä¸€äº›é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼Œå¤§å®¶é‡åˆ°çš„é—®é¢˜ä¹Ÿå¯ä»¥ç•™è¨€è¯„è®ºä¸€èµ·æ¢è®¨ğŸ˜

## Vue3.xå’ŒVue2.xçš„å‡ ä¸ªæ˜æ˜¾åŒºåˆ«ï¼š

### \#\# data

**vue2.x**

```
data() { return{} }
```

å®ç°å“åº”å¼

* å®šä¹‰åœ¨dataä¸­
* ä½¿ç”¨Vue.setå®ç°å“åº”å¼

**vue3.x**

```
import { reactive } from 'vue'

setup (props) {
    const state = reactive({
      title: 'Hello Vue3.0'
    })
    return state
 }
```

å®ç°å“åº”å¼

* ä»vueåŒ…ä¸­å¯¼å…¥ toRefs å‡½æ•°ï¼Œå¯¼å‡ºstateçš„æ—¶å€™ï¼Œè¿›è¡ŒåŒ…è£¹ã€‚ä»£ç å¦‚ä¸‹

```
setup (props) {
    const state = reactive({
      title: 'Hello Vue3.0'
    })
   return { ...toRefs(state), xxx }
 }
```

### \#\# methods

**vue2.x**

methods: { æ–¹æ³• }

**vue3.x**

* å†™åœ¨setupå‡½æ•°ä¸­ï¼Œå¹¶ä¸”è¦returnè¿”å›æ–¹æ³•åç§°
* è®°å¾—è¦æŠŠè¿”å›çš„stateæ•°æ®ï¼Œé€šè¿‡toRefså˜æˆå“åº”å¼çš„æ•°æ®ï¼Œå¦åˆ™ä¸ä¼šèµ·ä½œç”¨ã€‚ä»£ç å¦‚ä¸‹

```
return {
      ...toRefs(state),
      play
 }
```

### \#\# computed

**vue2.x**

computed: {è®¡ç®—å±æ€§}

**vue3.x**

* å†™åœ¨setupå‡½æ•°ä¸­ã€‚ä»£ç å¦‚ä¸‹

```
const getDoubleNum = computed(() => state.num * 2)
```

* å†™åœ¨stateä¸­

```
const state = reactive({
      myName: computed(() => 'my name is vue3.x')
 })
```

æ³¨æ„ï¼šéœ€è¦ä»vueåŒ…ä¸­å¯¼å…¥ computed å‡½æ•°ï¼Œå¦‚æœæ˜¯å†™åœ¨setupå‡½æ•°ä¸­ï¼Œæœ€åreturnçš„æ—¶å€™ï¼Œè¿”å›è®¡ç®—å±æ€§å‡½æ•°ã€‚

**vue2.x**

createdã€mountedã€beforeDestoryã€Destoryed ... å’Œ dataåŒçº§

**vue3.x**

å†™åœ¨setupå‡½æ•°ä¸­ï¼ŒonCreatedã€onMountedã€onBeforeUnmountã€onUnmounted ...

**å¯¹æ¯”**

beforeCreate-&gt;Â ä½¿ç”¨Â setup\(\)

created-&gt;Â ä½¿ç”¨setup\(\)

beforeMountÂ -&gt;Â onBeforeMount

MountedÂ -&gt;Â onMounted

beforeUpdateÂ -&gt;Â onBeforeUpdate

updatedÂ -&gt;Â onUpdated

beforeDestoryÂ -&gt;onBeforeDestory

destoryedÂ -&gt;Â onDestoryed

## Vue3.0ç”Ÿå‘½å‘¨æœŸä¸­çš„onBeforeMount:

å®˜æ–¹æ–‡æ¡£ä¸­æ˜ç¡®å†™å‡ºäº†onBeforeMountè¿™ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ ï¼ˆå®˜æ–¹æ–‡æ¡£åœ°å€ï¼š[https://v3.cn.vuejs.org/guide/composition-api-lifecycle-hooks.htmlï¼‰](https://v3.cn.vuejs.org/guide/composition-api-lifecycle-hooks.htmlï¼‰ï¼Œä½†å½“æˆ‘åœ¨setupä¸­ä½¿ç”¨onBeforeMounté’©å­æ—¶ï¼Œä¼šæç¤ºé”™è¯¯ï¼Œå¹¶ä¸”åœ¨é¡¹ç›®ä¸­æŸ¥è¯¢ä¸åˆ°è¯¥é’©å­ï¼Œå¦‚æœåœ¨setupå¤–é¢ï¼Œåƒvue)ï¼Œä½†æ˜¯å½“æˆ‘åœ¨setupä¸­ä½¿ç”¨onBeforeMounté’©å­æ—¶ï¼Œä¼šæç¤ºé”™è¯¯åŒæ—¶åœ¨é¡¹ç›®ä¸­æŸ¥è¯¢ä¸åˆ°è¿™ä¸ªé’©å­ï¼Œå¦‚æœåœ¨setupå¤–é¢ï¼Œåƒvue 2.xä¸­ä¸€æ ·ä½¿ç”¨beforeMountæ—¶ï¼Œè™½ç„¶ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å¹¶ä¸ä¼šè¿›å…¥è¿™ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ã€‚

**å®˜æ–¹æ–‡æ¡£ä¸­è§£é‡Šé“ï¼šå› ä¸º**`setup`**æ˜¯å›´ç»•**`beforeCreate`**å’Œ**`created`**ç”Ÿå‘½å‘¨æœŸé’©å­è¿è¡Œçš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ˜¾å¼åœ°å®šä¹‰å®ƒä»¬ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨è¿™äº›é’©å­ä¸­ç¼–å†™çš„ä»»ä½•ä»£ç éƒ½åº”è¯¥ç›´æ¥åœ¨**`setup`**å‡½æ•°ä¸­ç¼–å†™ã€‚**

ä¸‹é¢æ˜¯beforeCreateã€createdå’ŒbeforeMountä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­çš„è§£é‡Šï¼š

### 1.beforeCreateï¼š

vueå®ä¾‹ä¸­çš„elï¼Œdataï¼Œdataä¸­çš„messageéƒ½ä¸ºundefined

### 2. createdï¼š

elè¿˜æ˜¯undefinedï¼Œè€Œæ•°æ®å·²ç»ä¸dataä¸­çš„å±æ€§è¿›è¡Œç»‘å®šï¼ˆæ”¾åœ¨dataä¸­å±æ€§å½“å€¼å‘ç”Ÿæ”¹å˜çš„åŒæ—¶ï¼Œè§†å›¾ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼‰ï¼Œåœ¨è¿™é‡Œå¯ä»¥åœ¨æ¸²æŸ“å‰å€’æ•°ç¬¬äºŒæ¬¡æ›´æ”¹æ•°æ®çš„æœºä¼šï¼Œä¸ä¼šè§¦å‘å…¶ä»–çš„é’©å­å‡½æ•°ï¼Œä¸€èˆ¬å¯ä»¥åœ¨è¿™é‡Œåšåˆå§‹æ•°æ®çš„è·å–ã€‚

### 3. beforeMountï¼š

è½½å…¥å‰ï¼ˆå®Œæˆäº†dataå’Œelæ•°æ®åˆå§‹åŒ–ï¼‰ï¼Œä½†æ˜¯é¡µé¢ä¸­çš„å†…å®¹è¿˜æ˜¯vueä¸­çš„å ä½ç¬¦ï¼Œdataä¸­çš„messageä¿¡æ¯æ²¡æœ‰è¢«æŒ‚åœ¨åˆ°BomèŠ‚ç‚¹ä¸­ï¼Œåœ¨è¿™é‡Œå¯ä»¥åœ¨æ¸²æŸ“å‰æœ€åä¸€æ¬¡æ›´æ”¹æ•°æ®çš„æœºä¼šï¼Œä¸ä¼šè§¦å‘å…¶ä»–çš„é’©å­å‡½æ•°ï¼Œä¸€èˆ¬å¯ä»¥åœ¨è¿™é‡Œåšåˆå§‹æ•°æ®çš„è·å–ã€‚

### ä»createdåˆ°beforeMountçš„è¿‡ç¨‹ä¸­

* é¦–å…ˆä¼šåˆ¤æ–­vueå®ä¾‹ä¸­æœ‰æ²¡æœ‰elé€‰é¡¹ï¼Œå¦‚æœæœ‰çš„è¯åˆ™è¿›è¡Œä¸‹é¢çš„ç¼–è¯‘ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰elé€‰é¡¹ï¼Œåˆ™åœæ­¢ç”Ÿå‘½å‘¨æœŸï¼Œç›´åˆ°vueå®ä¾‹ä¸Šè°ƒç”¨vm.$mount\(el\)ã€‚
* å¦‚æœæœ‰elï¼Œå†åˆ¤æ–­æ˜¯å¦æœ‰templateå‚æ•°ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æŠŠå…¶å½“ä½œæ¨¡æ¿ç¼–è¯‘æˆrenderå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æŠŠå¤–éƒ¨çš„htmlä½œä¸ºæ¨¡æ¿ç¼–è¯‘ã€‚templateä¸­çš„æ¨¡æ¿ä¼˜å…ˆçº§é«˜äºouter HTMLæ¨¡æ¿ã€‚
* åœ¨vueå¯¹è±¡ä¸­è¿˜æœ‰ä¸€ä¸ªrenderå‡½æ•°ï¼Œå®ƒæ˜¯ä»¥createElementä½œä¸ºå‚æ•°ï¼Œç„¶ååšæ¸²æŸ“æ“ä½œï¼Œè€Œä¸”æˆ‘ä»¬å¯ä»¥ç›´æ¥åµŒå…¥JSX.
* ç»¼åˆæ’åä¼˜å…ˆçº§ï¼šrenderå‡½æ•°é€‰é¡¹ &gt;templateé€‰é¡¹ &gt;outer HTML.

ç»“åˆå®˜æ–¹æ–‡æ¡£çš„è§£é‡Šï¼Œæˆ‘çŒœæƒ³åœ¨vue 3.0ä¸­ï¼Œsetupåº”è¯¥æ˜¯å°†beforeCreateã€createdå’ŒbeforeMountä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸè¿›è¡Œäº†æ•´åˆï¼Œå®Œæˆdataå’Œelçš„æ•°æ®åˆå§‹åŒ–ï¼Œæ­¤æ—¶dataä¸­çš„messageä¿¡æ¯æ²¡æœ‰è¢«æŒ‚åœ¨åˆ°BomèŠ‚ç‚¹ä¸­ï¼ŒåŒæ—¶æä¾›ä¸€ä¸ªåœ¨æ¸²æŸ“å‰æ›´æ”¹æ•°æ®çš„é’©å­ã€‚è‡³äºonBeforeMountåœ¨setupä¸­æŠ¥é”™çš„é—®é¢˜ï¼Œæˆ‘è¿˜æ²¡æœ‰æ‰¾åˆ°è¯¦ç»†çš„è§£é‡Šï¼Œå¦‚æœæœ‰è°çŸ¥é“æ¬¢è¿ç•™è¨€ã€‚

### \#\#Â ç»„ä»¶ä¼ å€¼

**vue2.x**

çˆ¶ä¼ å­ï¼šprops

å­ä¼ çˆ¶ï¼šthis.$emit

å…„å¼Ÿç»„ä»¶ä¼ å€¼ï¼šÂ å…¬å…±busï¼Œå­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶å†ç»™å­ç»„ä»¶ï¼ˆçˆ¶ç»„ä»¶ä½œä¸ºä¸­é—´ä»¶ï¼‰ã€‚

**vue3.x**

çˆ¶ä¼ å­ï¼ˆçˆ·å­™ä¼ ï¼Œå¤šçº§ä¹‹é—´å¯ä¼ å€¼ï¼‰

çˆ¶ç»„ä»¶ï¼šprovide---provide\('åå­—',å€¼\)

å­ç»„ä»¶ï¼šinject----inject\('åå­—'\)

ä»£ç å¦‚ä¸‹ï¼š

çˆ¶ç»„ä»¶ï¼š

```
<template>
<div>
<Son />
</div>
</template>
<script>
// å¼•å…¥å­ç»„ä»¶
import Son from '@/components/Son'
// å¼•å…¥vueå‡½æ•°
import {reactive,provide} from 'vue'
export default{
components:{Son},
setup(){
    const state = reactive({
        title: 'ä½ å¥½'
    })
    provide('title',title)
    return {state}
   }
}
</sctipt>
```

å­ç»„ä»¶ï¼š

```
<template>
<div>
    {{title}}
</div>
</template>
<script>
// å¼•å…¥vueå‡½æ•°
import {reactive,inject} from 'vue'
export default{
setup(){
    const state = reactive({
        title: inject('title')
    })
       return {state}
   }
}
</sctipt>
```



